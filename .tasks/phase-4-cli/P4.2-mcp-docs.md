# P4.2 Documentation MCP

## Objectif

Créer une documentation complète pour l'utilisation du MCP avec différents clients : Claude Code, Cursor, VS Code.

## Prérequis

- [x] Système MCP existant fonctionnel
- [x] P1.4 - CLI Setup (contient déjà des instructions MCP dans `install.js`)

## Fichiers à Créer

```
Docs/
├── MCP/
│   ├── README.md              # Vue d'ensemble
│   ├── getting-started.md     # Démarrage rapide
│   ├── tools-reference.md     # Référence des tools
│   └── clients/
│       ├── claude-code.md     # Instructions Claude Code
│       ├── cursor.md          # Instructions Cursor
│       └── vscode.md          # Instructions VS Code
└── Workflows/
    ├── README.md              # Vue d'ensemble workflows
    └── creating-custom.md     # Créer ses propres workflows
```

## Spécifications

### Docs/MCP/README.md

```markdown
# Unreal Companion MCP

Control Unreal Engine through natural language using the Model Context Protocol.

## What is MCP?

MCP (Model Context Protocol) allows AI assistants to interact with external tools.
Unreal Companion provides 60+ tools to create, modify, and manage assets in UE5.

## Quick Start

1. **Start Unreal Engine** with your project open
2. **Start the MCP server**:
   ```bash
   cd unreal-companion
   python Python/unreal_mcp_server.py
   ```
3. **Configure your AI client** (see client-specific docs)
4. **Start building!**

## Available Tool Categories

| Category | Tools | Description |
|----------|-------|-------------|
| `blueprint_*` | 13 | Create and modify Blueprints |
| `graph_*` | 9 | Manage Blueprint graphs and nodes |
| `material_*` | 3 | Create materials and shaders |
| `widget_*` | 6 | Build UI widgets |
| `world_*` | 6 | Manage actors and levels |
| `core_*` | 5 | Save, query, get info |
| `meshy_*` | 3 | 3D generation (requires API key) |

## Example Requests

```
"Create a Blueprint called BP_Enemy that inherits from Character"
"Add a Health variable (float, default 100) to BP_Enemy"
"Create a material with a blue emissive glow"
"Spawn a cube at position (0, 0, 100)"
```

## Next Steps

- [Getting Started Guide](getting-started.md)
- [Tools Reference](tools-reference.md)
- [Claude Code Setup](clients/claude-code.md)
- [Cursor Setup](clients/cursor.md)
```

### Docs/MCP/clients/claude-code.md

```markdown
# Using Unreal Companion with Claude Code

## Prerequisites

- Claude Code CLI installed
- Unreal Engine 5.3+ with project open
- Python 3.10+

## Setup

### 1. Configure MCP in Claude Code

Add to your Claude Code settings (`~/.claude/settings.json`):

```json
{
  "mcp_servers": [
    {
      "name": "unreal-companion",
      "command": "python",
      "args": ["/path/to/unreal-companion/Python/unreal_mcp_server.py"],
      "env": {
        "UNREAL_PROJECT": "/path/to/your/project"
      }
    }
  ]
}
```

### 2. Start Unreal Engine

Open your project in Unreal Engine before using the tools.

### 3. Verify Connection

In Claude Code:
```
> Check if Unreal Engine is connected
```

Expected response:
```
✅ Connected to Unreal Engine 5.3
Project: YourProjectName
```

## Usage Examples

### Create a Blueprint

```
> Create a new Blueprint called BP_PlayerController that inherits from PlayerController
```

Claude will call:
- `blueprint_create(name="BP_PlayerController", parent_class="PlayerController")`

### Add Components

```
> Add a camera and spring arm to BP_PlayerController
```

Claude will call:
- `blueprint_component_batch(...)` with the components

### Create Event Graph

```
> When the game starts, print "Hello World" to the screen
```

Claude will call:
- `graph_batch(...)` with BeginPlay event and Print node

## Tips

1. **Be specific**: "Create BP_Enemy" is clearer than "make an enemy"
2. **Use batch operations**: Claude knows to use batch tools for efficiency
3. **Check results**: Ask "Did it work?" if unsure
4. **Save regularly**: Ask "Save all modified assets"

## Troubleshooting

### "Tool not found"
Make sure the MCP server is running and configured correctly.

### "Connection refused"
Unreal Engine must be running with the project open.

### "Asset not found"
Use full paths: `/Game/Blueprints/BP_Enemy`
```

### Docs/MCP/tools-reference.md

```markdown
# MCP Tools Reference

Complete reference for all available MCP tools.

## Blueprint Tools

### blueprint_create

Creates a new Blueprint asset.

**Parameters:**
- `name` (string, required): Name of the Blueprint (e.g., "BP_Enemy")
- `parent_class` (string, optional): Parent class (default: "Actor")
- `path` (string, optional): Asset path (default: "/Game/Blueprints/")

**Example:**
```
blueprint_create(name="BP_Pickup", parent_class="Actor")
```

### blueprint_variable_batch

Adds multiple variables to a Blueprint.

**Parameters:**
- `blueprint_name` (string, required): Target Blueprint
- `variables` (array, required): List of variable definitions

**Variable Definition:**
- `name` (string): Variable name
- `type` (string): Variable type (float, int, bool, String, Vector, etc.)
- `default` (any, optional): Default value
- `category` (string, optional): Category in details panel

**Example:**
```
blueprint_variable_batch(
  blueprint_name="BP_Enemy",
  variables=[
    {"name": "Health", "type": "float", "default": 100},
    {"name": "MaxHealth", "type": "float", "default": 100},
    {"name": "IsAlive", "type": "bool", "default": true}
  ]
)
```

### blueprint_component_batch

Adds multiple components to a Blueprint.

**Parameters:**
- `blueprint_name` (string, required): Target Blueprint
- `components` (array, required): List of component definitions

**Component Definition:**
- `ref` (string): Reference name for connections
- `class` (string): Component class name
- `attach_to` (string, optional): Parent component ref

**Example:**
```
blueprint_component_batch(
  blueprint_name="BP_Enemy",
  components=[
    {"ref": "mesh", "class": "SkeletalMeshComponent"},
    {"ref": "collision", "class": "CapsuleComponent"},
    {"ref": "audio", "class": "AudioComponent", "attach_to": "mesh"}
  ]
)
```

[... continue for all tools ...]
```

## Critères d'Acceptation

- [ ] README.md avec vue d'ensemble
- [ ] Getting started guide complet
- [ ] Documentation pour Claude Code
- [ ] Documentation pour Cursor
- [ ] Documentation pour VS Code
- [ ] Référence complète des tools
- [ ] Exemples d'utilisation
- [ ] Troubleshooting section
- [ ] Documentation workflows

## Notes

- Garder la doc à jour avec les nouveaux tools
- Inclure des exemples réels et testés
- Format Markdown pour compatibilité GitHub
- Référencer les commandes CLI existantes (P1.4) :
  - `npx unreal-companion doctor` - Vérifie la connexion MCP
  - `npx unreal-companion status` - Affiche l'état de l'installation
  - Les instructions MCP sont aussi dans le menu post-install
