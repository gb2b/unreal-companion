# P7.2 Input Vocal (Whisper)

## Objectif

IntÃ©grer la reconnaissance vocale via Whisper pour permettre la dictÃ©e dans les workflows et conversations.

## PrÃ©requis

- [x] Interface de chat fonctionnelle

## Fichiers Ã  CrÃ©er

- `web-ui/server/services/voice_service.py`
- `web-ui/src/components/input/VoiceInput.tsx`
- `web-ui/src/hooks/useVoiceRecording.ts`

## SpÃ©cifications

### Flow

```
1. User clique sur ğŸ¤
2. Enregistrement audio (MediaRecorder)
3. Envoi au serveur
4. Transcription via Whisper (OpenAI ou local)
5. Affichage de la transcription
6. User peut Ã©diter avant d'envoyer
```

### UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Ã‰crire...]                  [ğŸ¤]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“ (recording)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤ Ã‰coute en cours...              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 0:03            â”‚
â”‚  [â¹ ArrÃªter]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“ (transcribed)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ Transcription :                 â”‚
â”‚  "Je voudrais un systÃ¨me basÃ©       â”‚
â”‚   sur la rÃ©sonance..."              â”‚
â”‚                                     â”‚
â”‚  [âœ“ Envoyer]  [âœï¸ Modifier]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Configuration

```yaml
voice:
  enabled: true
  provider: whisper  # whisper | google | azure
  languages: [fr, en]
  auto_detect: true
  model: base  # tiny | base | small | medium | large
```

### API

```python
# POST /api/voice/transcribe
# Multipart: audio file
# Returns: { text, language, confidence }
```

## CritÃ¨res d'Acceptation

- [ ] Enregistrement audio dans le navigateur
- [ ] Transcription via Whisper API
- [ ] Support multi-langue (fr, en)
- [ ] DÃ©tection automatique de la langue
- [ ] Ã‰dition avant envoi
- [ ] Indicateur visuel d'enregistrement
- [ ] Gestion des erreurs (permission, timeout)
- [ ] Tests passent
