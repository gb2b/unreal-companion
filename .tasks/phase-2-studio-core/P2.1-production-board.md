# P2.1 Production Board (Vue Queues)

## Objectif

CrÃ©er le Production Board avec vue en queues par secteur (pas Kanban), incluant la visualisation des dÃ©pendances style "tech tree".

## PrÃ©requis

- [x] P1.3 - SystÃ¨me de Tasks

## Fichiers Ã  Modifier

- `web-ui/src/components/pages/StudioPage.tsx` - IntÃ©grer le nouveau board

## Fichiers Ã  CrÃ©er

- [x] `web-ui/src/components/studio/ProductionBoard.tsx` - Composant principal (existed)
- [x] ~~`web-ui/src/components/board/QueueColumn.tsx`~~ - IntÃ©grÃ© dans ProductionBoard
- [x] ~~`web-ui/src/components/board/TaskCard.tsx`~~ - IntÃ©grÃ© dans ProductionBoard
- [x] `web-ui/src/components/board/TaskDetailPanel.tsx` - Panel dÃ©tail
- [x] `web-ui/src/components/board/DependencyGraph.tsx` - Vue dÃ©pendances
- [x] `web-ui/src/components/board/CreateTaskModal.tsx` - CrÃ©ation task
- [x] `web-ui/src/components/board/index.ts` - Exports

## SpÃ©cifications

### Layout Principal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Production Board                            [+ Task] [âš™ View] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ğŸ¯ Conceptâ”‚  â”‚ğŸ’» Dev    â”‚  â”‚ğŸ¨ Art    â”‚  â”‚ğŸ—ºï¸ Levels â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚       â”‚
â”‚  â”‚ [Task 1] â”‚  â”‚ [Task 3] â”‚  â”‚ [Task 5] â”‚  â”‚ [Task 7] â”‚       â”‚
â”‚  â”‚   â–¶ READYâ”‚  â”‚   ğŸ”’ LOCKâ”‚  â”‚   â–¶ READYâ”‚  â”‚   ğŸ”’ LOCKâ”‚       â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚       â”‚
â”‚  â”‚ [Task 2] â”‚  â”‚ [Task 4] â”‚  â”‚ [Task 6] â”‚  â”‚ [Task 8] â”‚       â”‚
â”‚  â”‚   ğŸ”„ WIP â”‚  â”‚   â–¶ READYâ”‚  â”‚   âœ… DONEâ”‚  â”‚   â–¶ READYâ”‚       â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Vue DÃ©pendances: [Graphe style tech-tree]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TaskCard

```tsx
interface TaskCardProps {
  task: Task;
  onSelect: (task: Task) => void;
  onLaunch: (task: Task) => void;
}

// Affiche:
// - Titre
// - Status (icÃ´ne + couleur)
// - Agent assignÃ© (avatar)
// - Indicateur parent/subtasks
// - Bouton "Lancer" si ready
```

### Ã‰tats visuels

| Status | IcÃ´ne | Couleur | Interactif |
|--------|-------|---------|------------|
| locked | ğŸ”’ | Gris | Non (tooltip: "Attend X") |
| ready | â–¶ | Bleu | Oui (bouton Lancer) |
| in_progress | ğŸ”„ | Orange | Oui |
| done | âœ… | Vert | Oui (rÃ©ouvrir) |

### Vue DÃ©pendances (Tech Tree)

```tsx
interface DependencyGraphProps {
  tasks: Task[];
  onTaskClick: (task: Task) => void;
}

// Utiliser react-flow ou d3 pour afficher:
// - Noeuds = tasks
// - ArÃªtes = dÃ©pendances
// - Couleurs selon status
// - Zoom/pan
```

### Actions

1. **CrÃ©er Task** : Modal avec titre, description, secteur, dÃ©pendances optionnelles
2. **Lancer Task** : Transition vers Editor avec contexte
3. **Voir DÃ©tail** : Panel latÃ©ral avec historique complet
4. **RÃ©organiser** : Drag & drop dans la mÃªme queue (ordre)
5. **DÃ©placer** : Menu contextuel pour changer de secteur

### CrÃ©ation Task (UI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Nouvelle Task                    [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Titre:                                â”‚
â”‚  [Player Controller________________]   â”‚
â”‚                                        â”‚
â”‚  Description:                          â”‚
â”‚  [Create BP with movement__________]   â”‚
â”‚  [_________________________________]   â”‚
â”‚                                        â”‚
â”‚  Secteur:                              â”‚
â”‚  [â–¼ ğŸ’» Development_________________]   â”‚
â”‚                                        â”‚
â”‚  Agent:                                â”‚
â”‚  [â–¼ ğŸ›ï¸ Game Architect (dÃ©faut)_____]   â”‚
â”‚                                        â”‚
â”‚  PrioritÃ©:                             â”‚
â”‚  â—‹ Low  â— Medium  â—‹ High  â—‹ Critical   â”‚
â”‚                                        â”‚
â”‚  DÃ©pend de: (optionnel)                â”‚
â”‚  [+ Ajouter une dÃ©pendance]            â”‚
â”‚  â€¢ Core Loop âœ“                         â”‚
â”‚                                        â”‚
â”‚  Task parent: (optionnel)              â”‚
â”‚  [â–¼ Aucun________________________]     â”‚
â”‚                                        â”‚
â”‚         [Annuler]  [CrÃ©er Task]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## CritÃ¨res d'Acceptation

- [x] Affichage des 4 queues par dÃ©faut
- [x] Tasks groupÃ©es correctement par secteur
- [x] Status visuels distincts (locked, ready, in_progress, done)
- [x] Bouton "Lancer" sur les tasks ready
- [x] CrÃ©ation de task fonctionnelle (CreateTaskModal)
- [x] Panel dÃ©tail avec historique (TaskDetailPanel)
- [x] Vue dÃ©pendances (graphe) (DependencyGraph)
- [x] Drag & drop pour rÃ©organiser (mÃªme queue)
- [x] Menu contextuel pour dÃ©placer entre queues (dans TaskDetailPanel)
- [ ] Responsive (mobile-friendly) - Ã€ tester
- [ ] Tests passent - Ã€ Ã©crire

## Tests Ã  Ã‰crire

### Unit Tests (React)

```typescript
describe('ProductionBoard', () => {
  it('should render all queues');
  it('should group tasks by sector');
  it('should show correct status icons');
});

describe('TaskCard', () => {
  it('should show launch button for ready tasks');
  it('should be disabled for locked tasks');
  it('should show tooltip for locked tasks');
});

describe('CreateTaskModal', () => {
  it('should validate required fields');
  it('should allow adding dependencies');
  it('should create task on submit');
});
```

### E2E Tests

```typescript
describe('Production Board E2E', () => {
  it('should create a new task');
  it('should launch task and go to editor');
  it('should show dependency graph');
});
```

## Notes

- RÃ©utiliser les composants UI existants (Button, Card, Modal)
- Le board doit Ãªtre rapide mÃªme avec beaucoup de tasks
- PrÃ©voir un mode "compact" pour afficher plus de tasks
- Les tasks done peuvent Ãªtre masquÃ©es (toggle)
