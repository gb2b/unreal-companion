# P6.3 Meshy API (GÃ©nÃ©ration 3D)

## Objectif

IntÃ©grer l'API Meshy pour gÃ©nÃ©rer des assets 3D depuis du texte ou des images, avec preview et import dans Unreal.

## PrÃ©requis

- [x] P4.1 - GÃ©nÃ©ration d'images (pattern similaire)
- [x] SystÃ¨me MCP pour l'import

## Fichiers Ã  CrÃ©er

- `web-ui/server/services/meshy_service.py`
- `web-ui/server/routes/meshy.py`
- `web-ui/src/components/generation/MeshyGenerator.tsx`
- `web-ui/src/components/generation/Preview3D.tsx`

## SpÃ©cifications

### API Meshy

```python
class MeshyService:
    async def generate_text_to_3d(
        self,
        prompt: str,
        style: str = "realistic",
        poly_count: str = "medium"
    ) -> MeshyTask:
        """Lance une gÃ©nÃ©ration text-to-3D."""
        pass

    async def generate_image_to_3d(
        self,
        image_path: str
    ) -> MeshyTask:
        """Lance une gÃ©nÃ©ration image-to-3D."""
        pass

    async def check_status(self, task_id: str) -> MeshyStatus:
        """VÃ©rifie le status d'une gÃ©nÃ©ration."""
        pass

    async def download(self, task_id: str, format: str = "fbx") -> Path:
        """TÃ©lÃ©charge le rÃ©sultat."""
        pass
```

### UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¨ GÃ©nÃ©rer un asset 3D (Meshy)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  Mode: â—‰ Texte â†’ 3D   â—‹ Image â†’ 3D                        â”‚
â”‚                                                            â”‚
â”‚  Prompt:                                                   â”‚
â”‚  [Ancient stone altar with glowing blue runes___]         â”‚
â”‚                                                            â”‚
â”‚  Style: [â–¼ Realistic]   Poly: [â–¼ Medium (~10k)]          â”‚
â”‚                                                            â”‚
â”‚  [ğŸ¨ GÃ©nÃ©rer]                                              â”‚
â”‚                                                            â”‚
â”‚  Status: â³ GÃ©nÃ©ration en cours (2/5 Ã©tapes)...           â”‚
â”‚                                                            â”‚
â”‚  RÃ©sultat:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚                                          â”‚             â”‚
â”‚  â”‚     [Preview 3D rotatif]                 â”‚             â”‚
â”‚  â”‚                                          â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                            â”‚
â”‚  [â¬‡ï¸ TÃ©lÃ©charger FBX]  [ğŸ“¥ Importer dans Unreal]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### IntÃ©gration Unreal

```python
# Workflow complet
async def generate_and_import(prompt: str, level: str):
    # 1. GÃ©nÃ©rer
    task = await meshy.generate_text_to_3d(prompt)

    # 2. Attendre
    while not task.is_complete:
        await asyncio.sleep(5)
        task = await meshy.check_status(task.id)

    # 3. TÃ©lÃ©charger
    fbx_path = await meshy.download(task.id)

    # 4. Importer via MCP
    await mcp.asset_import(fbx_path, "/Game/Meshes/Generated/")

    # 5. Placer dans le level (optionnel)
    await mcp.world_spawn(asset_path, level, [0, 0, 0])
```

## CritÃ¨res d'Acceptation

- [ ] GÃ©nÃ©ration text-to-3D fonctionnelle
- [ ] GÃ©nÃ©ration image-to-3D fonctionnelle
- [ ] Preview 3D dans l'UI
- [ ] TÃ©lÃ©chargement FBX
- [ ] Import dans Unreal via MCP
- [ ] Placement optionnel dans le level
- [ ] Gestion du polling (status)
- [ ] Tests passent
