# P6.1 GÃ©nÃ©ration d'Images

## Objectif

IntÃ©grer les providers de gÃ©nÃ©ration d'images : Replicate (SDXL), OpenAI (DALL-E), Stability AI.

## PrÃ©requis

- [x] SystÃ¨me de settings avec API keys

## Fichiers Ã  CrÃ©er

- `web-ui/server/services/image_generation/base.py`
- `web-ui/server/services/image_generation/replicate.py`
- `web-ui/server/services/image_generation/openai.py`
- `web-ui/server/services/image_generation/stability.py`
- `web-ui/server/routes/image_generation.py`
- `web-ui/src/components/generation/ImageGenerator.tsx`

## SpÃ©cifications

### Interface Commune

```python
class ImageGenerator(ABC):
    @abstractmethod
    async def generate(
        self,
        prompt: str,
        style: str = "realistic",
        size: str = "1024x1024"
    ) -> GeneratedImage:
        pass

class GeneratedImage:
    url: str
    local_path: Optional[Path]
    prompt: str
    provider: str
    cost: float
```

### API Routes

```python
# POST /api/generate/image
# Body: { prompt, provider, style, size }
# Returns: { url, local_path }

# GET /api/generate/providers
# Returns: available providers with status
```

### UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¨ GÃ©nÃ©rer une image                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  Prompt:                                                   â”‚
â”‚  [Ancient mystical temple with blue runes________]        â”‚
â”‚                                                            â”‚
â”‚  Provider: [â–¼ Replicate SDXL]                             â”‚
â”‚  Style: [â–¼ Concept Art]                                   â”‚
â”‚                                                            â”‚
â”‚  [ğŸ¨ GÃ©nÃ©rer]                                              â”‚
â”‚                                                            â”‚
â”‚  RÃ©sultat:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         [Image gÃ©nÃ©rÃ©e]                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                            â”‚
â”‚  [ğŸ’¾ Sauvegarder]  [ğŸ“‹ Ajouter au Mood Board]            â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## CritÃ¨res d'Acceptation

- [ ] IntÃ©gration Replicate fonctionnelle
- [ ] IntÃ©gration OpenAI DALL-E fonctionnelle
- [ ] IntÃ©gration Stability AI fonctionnelle
- [ ] SÃ©lection du provider dans l'UI
- [ ] Sauvegarde locale de l'image
- [ ] Ajout au mood board possible
- [ ] Gestion des erreurs (quota, timeout)
- [ ] Tests passent
